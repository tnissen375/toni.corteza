- hosts: localhost # change if using a seperate machine for building images
  become: True
  gather_facts: yes
  roles:
    # uncomment if using a seperate/uninstalled machine (not localhost) for building images
    # - {
    #     role: base,
    #     configure_firewall: 'true'
    #   }
    # - {
    #     role: docker
    #   }
    # - {
    #     role: geerlingguy.ntp,
    #     ntp_manage_config: true,
    #     ntp_servers: [
    #       0.de.pool.ntp.org,
    #       1.de.pool.ntp.org,
    #       2.de.pool.ntp.org,
    #       3.de.pool.ntp.org
    #     ]
    #   }
    - {
        role : toni.buildimages
      }
  vars:
    images:
      - { namespace: "registry.{{ domain }}", name: "openresty_base", tag: "1.19.3.1", basenamespace: "", basename: "alpine", basetag: "3.13" }
      - { namespace: "registry.{{ domain }}", name: "openresty_base_fat", tag: "1.19.3.1-alpine-fat", basenamespace: "", basename: "openresty_base", basetag: "1.19.3.1" }
      - { namespace: "registry.{{ domain }}", name: "openresty", tag: "1.19.3.1-alpine-fat", basenamespace: "", basename: "openresty_base_fat", basetag: "1.19.3.1-alpine-fat" }
      - { namespace: "registry.{{ domain }}", name: "sshd", tag: "3.13", basenamespace: "", basename: "alpine", basetag: "3.13" }
      - { namespace: "registry.{{ domain }}", name: "go_dev_ssh", tag: "v1.32.2", basenamespace: "deis", basename: "go-dev", basetag: "v1.32.2" }
      - { namespace: "registry.{{ domain }}", name: "node_ssh", tag: "14", basenamespace: "", basename: "node", basetag: "14" } 